function initRSession(o){ocpu.seturl("//"+domain+"/ocpu/library/stats/R");ocpu.call("poisson",{link:"log"},function(o){loglinear=o}),ocpu.call("binomial",{link:"probit"},function(o){probit=o});myheader=!1,myfile=o,getData()}function getData(){ocpu.seturl("//"+domain+"/ocpu/library/utils/R");var o=ocpu.call("read.csv",{file:myfile,header:myheader,"na.strings":"NA"},function(o){console.log("read csv successfully"),mySession=o});o.fail(function(){alert("Server error: "+o.responseText)}),o.always(function(){$("#submitbutton").removeAttr("disabled")})}function getModel(o,e){ocpu.seturl("//"+domain+"/ocpu/library/stats/R");var l;"Log Linear"==o?l=loglinear:"Logit"==o?l=logit:"Probit"==o?l=probit:alert("Model error");ocpu.call("as.formula",{object:e},function(e){var n;"Log Linear"==o?(ocpu.seturl("//"+domain+"/ocpu/library/MASS/R"),n=ocpu.call("loglm",{formula:e,data:mySession},function(o){o.getConsole(function(o){document.getElementById("pv-model-result").innerHTML=o})})):n=ocpu.call("glm",{formula:e,family:l,data:mySession},function(o){ocpu.seturl("//"+domain+"/ocpu/library/base/R"),o.getConsole(function(o){document.getElementById("pv-model-result").innerHTML=o})}),n.fail(function(){alert("Server error: "+n.responseText)})})}var mySession,myheader,myfile,loglinear,logit="binomial",probit,domain="132.249.238.130";