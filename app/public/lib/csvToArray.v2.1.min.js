String.prototype.csvToArray=function(n){var e={fSep:",",rSep:"\r\n",quot:'"',head:!1,trim:!1},u,t,i,r;if(n)for(u in e)n[u]||(n[u]=e[u]);else n=e;for(t=[[""]],i=f=p=q=0;p<this.length;p++)switch(r=this.charAt(p)){case n.quot:q&&this.charAt(p+1)==n.quot?(t[i][f]+=n.quot,++p):q^=1;break;case n.fSep:q?t[i][f]+=r:(n.trim&&(t[i][f]=t[i][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),t[i][++f]="");break;case n.rSep.charAt(0):q?t[i][f]+=r:(n.trim&&(t[i][f]=t[i][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),t[++i]=[""],t[i][f=0]="",n.rSep.charAt(1)&&n.rSep.charAt(1)==this.charAt(p+1)&&++p);break;case"\n":q?t[i][f]+=r:(n.trim&&(t[i][f]=t[i][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),t[++i]=[""],t[i][f=0]="");break;default:t[i][f]+=r}return n.head&&t.shift(),t[t.length-1].length<t[0].length&&t.pop(),t};
