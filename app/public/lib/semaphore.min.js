(function(n){"use strict";function t(n,t){this.totalSize=parseInt(n,10);this.inUse=0;this.queue=[];this.timeout=parseFloat(t)}t.prototype.shiftq=function(){var n=this,t,i;if(n.queue.length>0&&n.inUse<n.totalSize)return t=function(){var t=!1;return function(){t||(n.inUse-=1,t=!0,n.shiftq())}}(),i=n.queue.shift(),n.inUse+=1,n.timeout&&setTimeout(t,n.timeout),i(t)};t.prototype.acquire=function(n){this.queue.push(n);this.shiftq()};typeof exports=="object"?module.exports=t:typeof define=="function"&&define.amd?define(function(){return t}):n.Semaphore=t})(this);
